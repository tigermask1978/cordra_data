We show below how to configure Cordra to behave like a sample Medical Records Application that could act as a starting point to create a comprehensive system for managing patient medical records.This sample application supports the following narrative:Patients visit Providers. Information is created during those visits, i.e., Encounters.Providers have areas of expertise that determine their speciality: General Physician and Endocrinologist are supported here.Patients encounters begin with a General Physicia
n (GP) and the GP may order tests at the Labs.Lab tests produce additional information.GP may recommend patients to specialists.Patients encounter with specialists produces more information.Also,Patients have read access to their medical information.Providers who see patients have read/write access to the medical information they create.In one possible scenario, patients must specifically give providers¡¯ access to their information when they visit new providers.In another possible scenario, the referring pr
ovider may give the referred provider access to the patient information.Labs do not have access to any medical information, by default. Patients must give explicit access.We describe below how to support the aforementioned narrative, beginning with the design.We will create four different types of digital objects:Patient type to capture information about patients. Patient Id, Name, Age, and Sex are captured.Provider type to capture information about providers. Provider Id, Name, and Speciality are captured.
Lab type to capture information about labs. Lab Id and Name are captured.Encounter type to capture medical information created by providers or generated due to lab tests. Specifically:Timestamp,Patient Id,Producer (to reflect the Id of the provider and/or the lab that produced the information)Notes (to capture provider observations or lab results)Referred (to capture the Id of the provider or the lab to whom the patient is referred)Referral Details (to capture lab prescriptions or details why the patient is
 referred to a specialist).While we assume PKI will normally be enabled for a production application for security, and the system can require that patients, providers, and labs authenticate via private keys, we described the use of passwords below to keep the example simple. In addition to the aforementioned attributes for Patient, Provider, and Lab, we add password attribute as can be seen in the schemas below. In that sense, patients, providers, and labs are all treated as users of the system.A patient ha
s read access to encounters that are about them. A provider has read/write access to encounters that are generated by them. Other providers (or labs) will only have access to encounters if they are explicitly shared. We will see how later in this tutorial.When signed in as the admin user select Admin->Authorization from the menu bar to specify type-level access control. This JSON is stored on the Design object and will be loaded automatically when you ¡°Load from file¡± as described later on. For keeping this
 description simple, this particular authorization configuration allows Patients, Providers, and Labs to be read by all users but only be modified by the representative party. Encounter objects do not allow readers or writers at the type level as their particular readers and writers are calculated in JavaScript for each specific instance of an Encounter.Type-level Access Control:Four types of digital objects are show below: Patient, Provider, Lab, and Encounter. Notice that identifiers of digital objects ar
e flagged to be auto-generated. The timestamp attribute in the Encounter object is also flagged to be auto-populated at the time of creation.Patient Schema:Provider Schema:Lab Schema:Encounter Schema:Using JavaScript rules, we will ensure that an encounter can be read by the referenced patient. We will also ensure that an encounter can be read or written by the referenced provider or lab.Associate the following JavaScript with the encounter type.Download the above types here. You can then load this informat
ion using the Cordra UI. Sign in into Cordra as admin and select the Admin->Types dropdown menu. Click the ¡°Load from file¡± button. In the dialog that pops up, select the types file you downloaded and check the box to delete existing objects. Click ¡°Load¡± to import the types into Cordra.That is it. The system is now ready for use.We will use curl and the REST API to demonstrate how to use the system. JSON records used with the various commands are also shown below. Although not shown here, the Cordra UI may
 be used to perform equivalent actions.For the purpose of this tutorial, the default Cordra address of https://localhost:8443/ is used. If your Cordra installation is running at a different location, please make the appropriate substitution. Also, the example curl commands will use the -k flag to tell curl to trust the self-signed certificate that comes with Cordra. This flag should not be used on production installations with real certificates.All Ids shown in the sample curl commands were randomly generat
ed. You will need to substitute these values with the appropriate Ids in your local system.Before issuing any calls that require authorization, we must first authenticate and get an access token:This call will return a token that we will use in subsequent calls.Creations return back with responses that consist of the Ids allotted to the corresponding user objects.Create a provider who is a general physician:Create a provider who is an endocrinologist:Create a lab:Create a patient named Jane Smith:Create ano
ther patient named John Smith. This patient is configured by the admin to share read access to all his new encounters with his wife Jane. As stated earlier, Jane¡¯s Id as used in shareEncountersWith property is randomly generated in this example:Note: For each different user in this section, you will need to get a new access token, as described above:The patient visits the General Physician (GP). The GP creates this encounter. Note that id, producer, and timestamp are automatically filled by Cordra as instru
cted in schemas and in rules:The GP orders lab tests. The patient visits the lab and the lab needs access to the encounter. The patient gives the lab access to the encounter. Since the patient can only modify the shareWith property on an encounter, first the patient, John, must GET the encounter object by its Id. As shown later, the patient can search for all encounters to get their Ids among other details.:Response:The patient can then modify the encounter object, as received above, to include the Id of th
e lab in order to share the encounter. The patient updates the encounter object:The lab creates an encounter including the results from the lab. They include the GP in the shareWith property:The patient returns to the GP, and the GP creates a 3rd encounter referring the patient to an endocrinologist.:The patient searches and retrieves all the encounters:The patient modifies the previous two encounters sharing them with the endocrinologist.: